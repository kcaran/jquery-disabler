/*!
 * jQuery Disabler
 * Author: Doug Estep - Dayton Technology Group.
 * Version 1.1.0
 * 
 * API Documentation:
 *   http://dougestep.com/dme/jquery-disabler-widget 
 * 
 * Depends:
 *   jquery >= 1.7.0 
 *   jquery-ui widget factory >= 1.8.0 
 *   
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */
(function(f,c){var d="hasDisabler";var g="disabler-ignore-readonly";var l="disabler-hide-readonly";var e="disabler-show-text-readonly";var k="panels-date-picker";var h="disabler-read-only-text";var b="disabler-read-only-display-as-text";var i="data-disabler-read-only";var n="disabler-hidden-inputs";var m="data-disabler-anchor-href";var a="disabler-saved-events";var j="data-disabler-read-only-display";f.widget("dtg.disabler",{options:{disable:false,readonly:false,expression:"*:not(.disabler-ignore-readonly)",disabledClass:"ui-state-disabled"},_create:function(){this._initOptions();if(this.options.disable){this._setOption("disable",this.options.disable)}if(this.options.readonly){this._setOption("readonly",this.options.readonly)}if(!this.element.hasClass(d)){this.element.addClass(d)}},_initOptions:function(){this.options.disable=this._ensureBoolean(this.options.disable);this.options.readonly=this._ensureBoolean(this.options.readonly)},_ensureBoolean:function(p){var o=false;if(this._isNotNullAndNotUndefined(p)){o=p.toString().toLowerCase()==="true"}return o},_setOption:function(p,q){this._initOptions();this.options[p]=q;var o=this.element.attr("id");switch(p){case"disable":this._doDisable(o,q);break;case"readonly":this.readOnly(o,this.options.readonly);break}},_getId:function(o){if(this._isNullOrUndefined(o)){o=this.element.attr("id")}if(this._isNotNullAndNotUndefined(o)){o=f.trim(o);if(o.length===0){o=null}}return o},enable:function(o){o=this._getId(o);if(this._isNullOrUndefined(o)){return}this._doDisable(o,false)},disable:function(o){o=this._getId(o);if(this._isNullOrUndefined(o)){return}this._doDisable(o,true)},_doDisable:function(o,q){var s=this._escape(o);var p=f.Event("beforeDisable");this._trigger("beforeDisable",p,{containerId:s,disabling:q,element:this.element});if(p.isDefaultPrevented()){return}this._readOnlyForDisable(o,q);this.options.disable=q;var r=f.Event("afterDisable");this._trigger("afterDisable",r,{containerId:s,disabling:q,element:this.element});this.options.disable=q},_readOnlyForDisable:function(p,o){p=this._getId(p);if(this._isNullOrUndefined(p)){return}o=this._defaultReadOnlyFlag(o);this._doReadOnly(p,o,true)},readOnly:function(p,o){p=this._getId(p);if(this._isNullOrUndefined(p)){return}o=this._defaultReadOnlyFlag(o);this._doReadOnly(p,o,false)},_defaultReadOnlyFlag:function(o){if(o===c){o=true}return o},_doReadOnly:function(u,v,w){var q=this._escape(u);var x=f.Event("beforeReadOnly");this._trigger("beforeReadOnly",x,{containerId:q,readOnlyFlag:v,disabling:w,element:this.element});if(x.isDefaultPrevented()||v===c){return}var o=[];var p=this._formatSelectorForContainerId(q);var s=f(p);if(s.length===0){return}this._doReadOnlyIteration(s,v,o,w);var t=this;p=this.options.expression+", span."+h+", ."+l;s.find(p).each(function(z){var B=f(this);var A=f.Event("readOnlyIteration");t._trigger("readOnlyIteration",A,{input:B,index:z,containerId:q,readOnlyFlag:v,disabling:w,element:t.element});if(A.isDefaultPrevented()){return true}var y=B.data("disabler");if(y!==c){return true}t._doReadOnlyIteration(B,v,o,w)});this._processHiddenInputsOnReadOnly(q,v,o);this.options.readonly=v;var r=f.Event("afterReadOnly");this._trigger("afterReadOnly",r,{containerId:q,readOnlyFlag:v,disabling:w,element:this.element})},_whatTypeAmI:function(p){var o=p.attr("type");if(o===c){if(p[0]===c){o=""}else{o=p[0].tagName}}return o.toLowerCase()},_doReadOnlyIteration:function(q,o,r,p){if(o){this._turnReadOnlyOn(q,r,p)}else{this._turnReadOnlyOff(q)}},_turnReadOnlyOn:function(q,r,o){if(this._hasAttribute(q,i)){return}if(q.attr("readonly")!==c||q.attr("disabled")!==c){return}if((q.hasClass("hasDatepicker")||q.hasClass(k))&&q.datepicker("option","disabled")){return}this._setAttribute(q,i,"true");if(q.hasClass(g)){return}var p=this._whatTypeAmI(q);if(!o){if(q.hasClass(l)){this._disableEvents(q);r.push(q);q.hide();return}if(q.hasClass(e)){this._disableEvents(q);this._showTextReadOnly(q,p);return}}var s=f.Event("turnReadOnlyOn");this._trigger("turnReadOnlyOn",s,q);if(s.isDefaultPrevented()){return}if(q.data("accordion")!==c){}else{if(q.data("progressbar")!==c){q.progressbar("disable")}else{if(q.data("slider")!==c){q.slider("disable")}else{if(q.data("spinner")!==c){q.spinner("disable")}else{if(q.data("tabs")!==c){q.tabs("disable")}else{if(q.data("menu")!==c){q.menu("disable")}else{if(q.data("datapicker")||q.hasClass(k)){q.datepicker("disable")}else{if(p==="a"){this._disableLink(q)}else{if(p==="submit"||p=="button"||p=="label"){if(q.hasClass("ui-button")){q.button("disable")}else{if(p==="label"){q.addClass(this.options.disabledClass)}else{q.attr("disabled","true")}}}else{if(p==="select"||p=="checkbox"||p=="radio"){this._disableEvents(q);q.attr("disabled","true");q.addClass(this.options.disabledClass)}else{if(p==="text"||p==="textarea"){q.attr("readonly","readonly");q.attr("disabled","true");q.addClass(this.options.disabledClass)}else{this._disableEvents(q)}}}}}}}}}}}},_showTextReadOnly:function(u,q){var t=f.Event("showTextReadOnly");this._trigger("showTextReadOnly",t,u);if(t.isDefaultPrevented()){return}var s=this;var r="";var v="";if(q==="a"){v=this._getTextForInput(u,u.text())}else{if(q==="text"||q==="textarea"){v=this._getTextForInput(u,u.val())}else{if(q==="radio"||q==="checkbox"){if(u.prop("checked")){v=this._getTextForInput(u,u.val())}}else{if(q==="select"){var o=[];u.find("option:selected").each(function(w){var x=f(this);var y=s._getTextForSelectOption(x);o.push(y)});v=o.join(", ")}}}}u.wrap('<span class="'+h+'"></span>');this._setAttribute(u.parent("span."+h),i,"true");var p="";if(f.trim(v).length===0){v="&nbsp;"}u.parent().after('<span class="'+b+'" '+p+">"+v+"</span>");u.hide()},_getTextForInput:function(p,o){var q=this._getAttribute(p,j);if(q===c){q=o}overrideText=this._getAttribute(p.parent(),j);if(overrideText!==c){q=overrideText}return q},_getTextForSelectOption:function(o){var p=this._getAttribute(o,j);if(p===c){p=o.text()}return p},_turnReadOnlyOff:function(r){if(this._hasNoAttribute(r,i)){return}this._removeAttribute(r,i);if(r.hasClass(h)){var o=f.Event("undoShowTextReadOnly");this._trigger("undoShowTextReadOnly",o,r);if(!o.isDefaultPrevented()){var q=r.next("span."+b);q.remove();var t=r.children();t.unwrap();this._enableEvents(t);t.show()}}else{var s=f.Event("turnReadOnlyOff");this._trigger("turnReadOnlyOff",s,r);if(!s.isDefaultPrevented()){var p=this._whatTypeAmI(r);if(r.data("accordion")!==c){}else{if(r.data("progressbar")!==c){r.progressbar("enable")}else{if(r.data("slider")!==c){r.slider("enable")}else{if(r.data("spinner")!==c){r.spinner("enable")}else{if(r.data("tabs")!==c){r.tabs("enable")}else{if(r.data("menu")!==c){r.menu("enable")}else{if(r.data("datapicker")||r.hasClass(k)){r.datepicker("enable")}else{if(p==="a"){this._enableLink(r)}else{if(p==="submit"||p=="button"||p=="label"){if(r.hasClass("ui-button")){r.button("enable")}else{if(p==="label"){r.removeClass(this.options.disabledClass)}else{r.removeAttr("disabled")}}}else{if(p==="select"||p=="checkbox"||p=="radio"){this._enableEvents(r);r.removeAttr("disabled");r.removeClass(this.options.disabledClass)}else{if(p==="text"||p==="textarea"){r.removeAttr("readonly");r.removeAttr("disabled");r.removeClass(this.options.disabledClass)}else{this._enableEvents(r)}}}}}}}}}}}}}},_processHiddenInputsOnReadOnly:function(p,o,u){var v=this._escapeValue(this.element.attr("id"));if(o){if(u.length>0){f("#"+v).data(n,u)}var t=f.Event("processHiddenInputsReadOnly");this._trigger("processHiddenInputsReadOnly",t,{containerId:v,hiddenInput:r,element:this.element})}else{u=f("#"+v).data(n);if(u!==c){for(var q=0;q<u.length;q++){var r=u[q];this._enableEvents(r);r.show();var s=f.Event("processHiddenInputsNotReadOnlyIteration");this._trigger("processHiddenInputsNotReadOnlyIteration",s,{containerId:v,hiddenInput:r,element:this.element})}f("#"+v).removeData(n)}}},_disableLink:function(p){this._disableEvents(p);var o=p.attr("href");if(o!==c){this._setAttribute(p,m,o);p.attr("href","#")}p.on("click",function(q){q.preventDefault()});p.addClass(this.options.disabledClass)},_disableEvents:function(r){var s=f.Event("disableEvents");this._trigger("disableEvents",s,r);if(s.isDefaultPrevented()){return}var p=this.widgetEventPrefix;var q=r.data("events");if(q!==c){var o=[];f.each(q,function(u,t){f.each(t,function(v){var w=t[v];if(w!==c){var x={eventName:u,handler:w};if(u.indexOf(p)<0){o.push(x);r.unbind(u)}}})});r.data(a,o)}},_enableLink:function(p){p.unbind();this._enableEvents(p);var o=this._getAttribute(p,m);if(o!==c){p.attr("href",o);this._removeAttribute(p,m)}p.removeClass(this.options.disabledClass)},_enableEvents:function(q){var p=f.Event("enableEvents");this._trigger("enableEvents",p,q);if(p.isDefaultPrevented()){return}var o=q.data(a);if(o!==c){f.each(o,function(s){var u=o[s];var r=u.eventName;var t=u.handler;q.on(r,t)})}q.removeData(a)},_escape:function(o){if(o===c){o=this.element.attr("id")}return this._escapeValue(o)},_escapeValue:function(o){o=o.replace(/\+/g,"\\+");o=o.replace(/\\/g,"\\");o=o.replace(/\//g,"\\/");o=o.replace(/!/g,"\\!");o=o.replace(/"/g,'\\"');o=o.replace(/#/g,"\\#");o=o.replace(/\$/g,"\\$");o=o.replace(/%/g,"\\%");o=o.replace(/&/g,"\\&");o=o.replace(/'/g,"\\'");o=o.replace(/\(/g,"\\(");o=o.replace(/\)/g,"\\)");o=o.replace(/\*/g,"\\*");o=o.replace(/,/g,"\\,");o=o.replace(/\./g,"\\.");o=o.replace(/:/g,"\\:");o=o.replace(/;/g,"\\;");o=o.replace(/\?/g,"\\?");o=o.replace(/@/g,"\\@");o=o.replace(/\[/g,"\\[");o=o.replace(/\]/g,"\\]");o=o.replace(/\^/g,"\\^");o=o.replace(/`/g,"\\`");o=o.replace(/\{/g,"\\{");o=o.replace(/\}/g,"\\}");o=o.replace(/\|/g,"\\|");o=o.replace(/\~/g,"\\~");return o},_isNotNullAndNotUndefined:function(o){return o!==c&&o!==null},_isNullOrUndefined:function(o){return o===null||o===c},_formatSelectorForContainerId:function(p){var q=this._escapeValue(this.element.attr("id"));if(q===p){p=null}var o="#"+p+" ";if(this._isNullOrUndefined(p)){o=""}if(o===""){o="#"+q}else{o="#"+q+" "+o}return o+" "},_hasAttribute:function(q,p){var o=q.attr(p);return typeof o!=="undefined"&&o!==false},_hasNoAttribute:function(p,o){return !this._hasAttribute(p,o)},_setAttribute:function(p,o,q){p.attr(o,q)},_removeAttribute:function(p,o){p.removeAttr(o)},_getAttribute:function(p,o){return p.attr(o)}});f.extend(f.dtg.disabler,{version:"1.1.0"})}(jQuery));